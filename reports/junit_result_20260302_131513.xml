<?xml version="1.0" encoding="utf-8"?><testsuites><testsuite name="pytest" errors="0" failures="2" skipped="0" tests="5" time="164.718" timestamp="2026-03-02T13:15:13.556261" hostname="LAPTOP-AKAH6LMA"><testcase classname="test_cases.test_api.test_api_demo" name="test_api_demo" time="3.514"><failure message="assert 404 == 200&#10; +  where 404 = &lt;Response [404]&gt;.status_code">@allure.epic("API自动化")
    @allure.feature("基础接口")
    @allure.story("demo接口验证")
    def test_api_demo():
        # 将cookie转换为字典
     #   cookie_dict = {cookie['name']: cookie['value'] for cookie in login_cookie}
    
        # 发送请求
        url = "https://jsonplaceholder.typicode.com/tods/1"
        headers = {"Content-Type": "application/json"}
        response = requests.get(url, headers=headers)
    
        # 记录日志
        logger.info(f"请求URL: {url}")
        logger.info(f"请求头: {headers}")
        logger.info(f"响应状态码: {response.status_code}")
        logger.info(f"响应内容: {response.text}")
    
        # 断言
&gt;       assert response.status_code == 200
E       assert 404 == 200
E        +  where 404 = &lt;Response [404]&gt;.status_code

test_cases\test_api\test_api_demo.py:26: AssertionError</failure></testcase><testcase classname="test_cases.test_ui.test_ui_font" name="test_font_upload" time="27.827" /><testcase classname="test_cases.test_ui.test_ui_template_list" name="test_template_status" time="29.559" /><testcase classname="test_cases.test_ui.test_ui_template_list" name="test_design_properties_default_value" time="48.662" /><testcase classname="test_cases.test_ui.test_ui_template_list" name="test_kongjian_list_drag_default_value" time="54.578"><failure message="AssertionError: 元素'承前页'存在，预期存在&#10;assert 0 != 0&#10; +  where 0 = len([])">login = &lt;selenium.webdriver.chrome.webdriver.WebDriver (session="634e874cffbd821daf855c345c33abf4")&gt;

    @allure.epic("UI自动化")
    @allure.feature("打印模板")
    @allure.story("设计器列表新增检查")
    def test_kongjian_list_drag_default_value(login):
        logger.info("该用例用于进行打印模板设计器中列表控件的删除、新增、配置后的默认属性验证")
        driver = login
        logger.info("用例前置：检查当前预用模板是否存在，存在就删掉")
        WebDriverWait(driver, 20).until(
            EC.presence_of_element_located((By.XPATH, '//*[@class="card_name"][text()="生产订单"]')))
        with allure.step("检查并删除历史执行中遗留的本次用例使用模板名称模板"):
            try:
                element = driver.find_element(By.XPATH, '//*[text()="复制_列表属性验证"]')
                if element is not None:
                    more = driver.find_element(By.XPATH, '//*[text()="复制_列表属性验证"]/../..//*[@fieldid="iprint_more-btn"]')
                    ActionChains(driver).move_to_element(more).perform()
                    time.sleep(5)
                    driver.find_element(By.XPATH, '//*[@fieldid="iprint_delete-btn"][text()="删除"]').click()
                    WebDriverWait(driver, 20).until(
                        EC.presence_of_element_located((By.XPATH, '//*[@fieldid="iprint_app_model_modal_title"]')))
                    driver.find_element(By.XPATH, '//*[@fieldid="iprint_app_model_modal_footer_ok"]').click()
                    WebDriverWait(driver, 20).until(
                        EC.invisibility_of_element_located((By.XPATH, '//*[text()="复制_列表属性验证"]')))
            except NoSuchElementException:
                pass
    
        with allure.step("获取当前句柄"):
            WebDriverWait(driver, 20).until(
                EC.presence_of_element_located((By.XPATH, '//*[@class="card_name"][text()="生产订单"]')))
            driver.find_element(By.XPATH, '//*[text()="生产订单"]/..//*[@fieldid="iprint_copy-btn"]').click()
            # 获取当前窗口句柄
            printlist_handle = driver.current_window_handle
        with allure.step("进行目标模板的创建"):
            logger.info("修改复制模板名称并确定")
            WebDriverWait(driver, 20).until(
                EC.presence_of_element_located((By.XPATH, '//*[@fieldid="print_multilang_requireNoAutoComplete"]')))
            # 清空原内容
            # clear方法使用无效，改为模拟键盘删除方法
            # driver.find_element(By.XPATH, '//*[@fieldid="print_multilang_requireNoAutoComplete"]').clear()
            element = driver.find_element(By.XPATH, '//*[@fieldid="print_multilang_requireNoAutoComplete"]')
            # 模拟control+a键盘全选
            element.send_keys(Keys.CONTROL + 'a')
            # 模拟键盘的删除delete
            element.send_keys(Keys.DELETE)
            # 写入新内容
            driver.find_element(By.XPATH, '//*[@fieldid="print_multilang_requireNoAutoComplete"]').send_keys(
                "复制_列表属性验证")
            WebDriverWait(driver, 20).until(
                EC.presence_of_element_located((By.XPATH, '//*[@fieldid="iprint_CopyTemp_model_modal_footer_ok"]')))
            driver.find_element(By.XPATH, '//*[@fieldid="iprint_CopyTemp_model_modal_footer_ok"]').click()
        with allure.step("进入打印模板设计器浏览器页面"):
            logger.info("进入打印模板设计器浏览器页面")
            WebDriverWait(driver, 20).until(lambda a: len(a.window_handles) &gt; 1)
            for handle in driver.window_handles:
                if handle != printlist_handle:
                    driver.switch_to.window(handle)
            WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.XPATH, '//*[@id="set-propty"]')))
        #开始进行列表控件的新增、验证过程
        with allure.step("等待并删除画布上已经配置好的列表控件"):
            logger.info("等待并删除画布上已经配置好的列表控件")
            WebDriverWait(driver,20).until(EC.presence_of_element_located((By.XPATH,'//*[@title="列表: 生产订单表体"]')))
            element = driver.find_element(By.XPATH,'//*[@title="列表: 生产订单表体"]')
            if element:
                element.click()
                #等待删除按钮出现并点击
                WebDriverWait(driver,20).until(EC.presence_of_element_located((By.XPATH,'//*[@title="列表: 生产订单表体"]/..//*[contains(@class,"delete-button")]')))
                driver.find_element(By.XPATH,'//*[@title="列表: 生产订单表体"]/..//*[contains(@class,"delete-button")]').click()
                element = driver.find_elements(By.XPATH, '//*[@title="列表: 生产订单表体"]')
                assert len(element) ==0
                logger.info("系统预置的列表在画布删除成功")
        #通过拖拽添加新列表控件并进行元素配置
        with allure.step("通过拖拽添加新列表控件"):
            #配置列表控件element
            list_element = driver.find_element(By.XPATH,'//*[@fieldid="design|ComponentGroup|Panel|tableGroup|table"]')
            logger.info("获取到列表控件")
            #配置画布目标element
            targ_element = driver.find_element(By.XPATH,'//*[@id="watermarkWordCover"]')
            logger.info("获取到画布")
            #将列表控件移动到目标位置
            #ActionChains(driver).drag_and_drop(list_element,targ_element).perform()
            action = ActionChains(driver)
            action.move_to_element(list_element).perform()
            action.click_and_hold()
            # 3. 将鼠标移动到画布的中心位置
            # 计算画布中心坐标
            logger.info("x坐标是"+str(targ_element.location['x']))
            logger.info("y坐标是"+str(targ_element.location['y']))
            canvas_center_x = targ_element.location['x'] + 200
            canvas_center_y = targ_element.location['y'] + 400
            action.move_by_offset(canvas_center_x - list_element.location['x'],
                                   canvas_center_y - list_element.location['y']).perform()
            action.release().perform()
            logger.info("列表控件完成向画布拖入操作")
            logger.info("验证列表设置弹窗弹出正常")
            WebDriverWait(driver,20).until(EC.presence_of_element_located((By.XPATH,'//*[@id="inputDesignModalHeader"]')))
            list_settings_element = driver.find_element(By.XPATH,'//*[@id="inputDesignModalHeader"]')
            time.sleep(10)
            assert list_settings_element is not None
        with allure.step("开始配置列表的三个指定字段"):
            logger.info("开始配置列表的三个指定字段")
            #搜索选择字段
            WebDriverWait(driver,20).until(EC.presence_of_element_located((By.XPATH,'//*[@placeholder="请输入查找内容"]')))
            element = driver.find_element(By.XPATH,'//*[@placeholder="请输入查找内容"]')
            logger.info("搜索并选择字段【开工日期】")
            element.send_keys("开工日期")
            WebDriverWait(driver,20).until(EC.presence_of_element_located((By.XPATH,'//*[@id="Order.orderProduct.startDate"]')))
            driver.find_element(By.XPATH,'//*[@id="Order.orderProduct.startDate"]').click()
            #删除搜索框内容
            element = driver.find_element(By.XPATH, '//*[@value="开工日期"][@type="search"]')
            # 模拟control+a键盘全选
            element.click()
            element.send_keys(Keys.CONTROL + 'a')
            # 模拟键盘的删除delete
            element.send_keys(Keys.DELETE)
            time.sleep(3)
            logger.info("开始验证第一个字段选择是否正常")
            yuansu1 = driver.find_element(By.XPATH,'//*[@title="Order.orderProduct.startDate"]')
            assert yuansu1 is not None
            logger.info("搜索并选择字段【完工日期】")
            element.send_keys("完工日期")
            WebDriverWait(driver, 20).until(
                EC.presence_of_element_located((By.XPATH, '//*[@id="Order.orderProduct.finishDate"]')))
            driver.find_element(By.XPATH, '//*[@id="Order.orderProduct.finishDate"]').click()
            # 删除搜索框内容
            element = driver.find_element(By.XPATH, '//*[@value="完工日期"][@type="search"]')
            # 模拟control+a键盘全选
            element.send_keys(Keys.CONTROL + 'a')
            # 模拟键盘的删除delete
            element.send_keys(Keys.DELETE)
            time.sleep(3)
            logger.info("开始验证第二个字段选择是否正常")
            yuansu2 = driver.find_element(By.XPATH, '//*[@title="Order.orderProduct.finishDate"]')
            assert yuansu2 is not None
            logger.info("搜索并选择字段【生产数量】")
            element.send_keys("生产数量")
            WebDriverWait(driver, 20).until(
                EC.presence_of_element_located((By.XPATH, '//*[@id="Order.orderProduct.quantity"]')))
            driver.find_element(By.XPATH, '//*[@id="Order.orderProduct.quantity"]').click()
            # 删除搜索框内容
            element = driver.find_element(By.XPATH, '//*[@value="生产数量"][@type="search"]')
            # 模拟control+a键盘全选
            element.send_keys(Keys.CONTROL + 'a')
            # 模拟键盘的删除delete
            element.send_keys(Keys.DELETE)
            time.sleep(3)
            logger.info("开始验证第三个字段选择是否正常")
            yuansu3 = driver.find_element(By.XPATH, '//*[@title="Order.orderProduct.quantity"]')
            assert yuansu3 is not None
        with allure.step("点击确定保存列表"):
            logger.info("点击确定保存列表")
            WebDriverWait(driver,20).until(EC.presence_of_element_located((By.XPATH,'//*[text()="确定"]')))
            driver.find_element(By.XPATH,'//*[text()="确定"]').click()
        time.sleep(3)
        with allure.step("开始验证新增列表是否展示正常"):
            logger.info("开始验证新增列表是否展示正常")
            elements = driver.find_elements(By.XPATH, '//*[@id="inputDesignModalHeader"]')
            assert len(elements) == 0, "列表设置弹窗未关闭"
            #检查列表配置后在画布上展示正常
            new_list_title = driver.find_element(By.XPATH,'//*[@id="watermarkWordCover"]//*[@title="列表: 生产订单产品"]')
            assert new_list_title is not None
        with allure.step("验证列表默认没有开启承前过次页，且开启设置正常"):
            logger.info("验证列表默认没有开启承前过次页，且开启设置正常")
            chengqianye = driver.find_elements(By.XPATH,'//*[text()="承前页"]')
            guociye = driver.find_elements(By.XPATH,'//*[text()="过次页"]')
            assert len(chengqianye) == 0,"元素'承前页'存在，预期不存在"
            assert len(guociye) == 0,"元素'过次页'存在，预期不存在"
        with allure.step("开启承前过次开关"):
            logger.info("开启承前过次开关")
            WebDriverWait(driver,20).until(EC.presence_of_element_located((By.XPATH,'//*[@fieldid="design|InputBool|pastAcceptance|Switch"]')))
            driver.find_element(By.XPATH,'//*[@fieldid="design|InputBool|pastAcceptance|Switch"]').click()
        time.sleep(3)
        with allure.step("验证开启后承前页、过次页两行出现"):
            logger.info("验证开启后承前页、过次页两行出现")
&gt;           assert len(chengqianye) != 0, "元素'承前页'存在，预期存在"
E           AssertionError: 元素'承前页'存在，预期存在
E           assert 0 != 0
E            +  where 0 = len([])

test_cases\test_ui\test_ui_template_list.py:462: AssertionError</failure></testcase></testsuite></testsuites>