{"name": "test_kongjian_list_drag_default_value", "status": "failed", "statusDetails": {"message": "AssertionError: 元素'承前页'存在，预期存在\nassert 0 != 0\n +  where 0 = len([])", "trace": "login = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"7c8d269601800029baa58b96d3264d83\")>\n\n    @allure.epic(\"UI自动化\")\n    @allure.feature(\"打印模板\")\n    @allure.story(\"设计器列表新增检查\")\n    def test_kongjian_list_drag_default_value(login):\n        logger.info(\"该用例用于进行打印模板设计器中列表控件的删除、新增、配置后的默认属性验证\")\n        driver = login\n        logger.info(\"用例前置：检查当前预用模板是否存在，存在就删掉\")\n        WebDriverWait(driver, 20).until(\n            EC.presence_of_element_located((By.XPATH, '//*[@class=\"card_name\"][text()=\"生产订单\"]')))\n        with allure.step(\"检查并删除历史执行中遗留的本次用例使用模板名称模板\"):\n            try:\n                element = driver.find_element(By.XPATH, '//*[text()=\"复制_列表属性验证\"]')\n                if element is not None:\n                    more = driver.find_element(By.XPATH, '//*[text()=\"复制_列表属性验证\"]/../..//*[@fieldid=\"iprint_more-btn\"]')\n                    ActionChains(driver).move_to_element(more).perform()\n                    time.sleep(5)\n                    driver.find_element(By.XPATH, '//*[@fieldid=\"iprint_delete-btn\"][text()=\"删除\"]').click()\n                    WebDriverWait(driver, 20).until(\n                        EC.presence_of_element_located((By.XPATH, '//*[@fieldid=\"iprint_app_model_modal_title\"]')))\n                    driver.find_element(By.XPATH, '//*[@fieldid=\"iprint_app_model_modal_footer_ok\"]').click()\n                    WebDriverWait(driver, 20).until(\n                        EC.invisibility_of_element_located((By.XPATH, '//*[text()=\"复制_列表属性验证\"]')))\n            except NoSuchElementException:\n                pass\n    \n        with allure.step(\"获取当前句柄\"):\n            WebDriverWait(driver, 20).until(\n                EC.presence_of_element_located((By.XPATH, '//*[@class=\"card_name\"][text()=\"生产订单\"]')))\n            driver.find_element(By.XPATH, '//*[text()=\"生产订单\"]/..//*[@fieldid=\"iprint_copy-btn\"]').click()\n            # 获取当前窗口句柄\n            printlist_handle = driver.current_window_handle\n        with allure.step(\"进行目标模板的创建\"):\n            logger.info(\"修改复制模板名称并确定\")\n            WebDriverWait(driver, 20).until(\n                EC.presence_of_element_located((By.XPATH, '//*[@fieldid=\"print_multilang_requireNoAutoComplete\"]')))\n            # 清空原内容\n            # clear方法使用无效，改为模拟键盘删除方法\n            # driver.find_element(By.XPATH, '//*[@fieldid=\"print_multilang_requireNoAutoComplete\"]').clear()\n            element = driver.find_element(By.XPATH, '//*[@fieldid=\"print_multilang_requireNoAutoComplete\"]')\n            # 模拟control+a键盘全选\n            element.send_keys(Keys.CONTROL + 'a')\n            # 模拟键盘的删除delete\n            element.send_keys(Keys.DELETE)\n            # 写入新内容\n            driver.find_element(By.XPATH, '//*[@fieldid=\"print_multilang_requireNoAutoComplete\"]').send_keys(\n                \"复制_列表属性验证\")\n            WebDriverWait(driver, 20).until(\n                EC.presence_of_element_located((By.XPATH, '//*[@fieldid=\"iprint_CopyTemp_model_modal_footer_ok\"]')))\n            driver.find_element(By.XPATH, '//*[@fieldid=\"iprint_CopyTemp_model_modal_footer_ok\"]').click()\n        with allure.step(\"进入打印模板设计器浏览器页面\"):\n            logger.info(\"进入打印模板设计器浏览器页面\")\n            WebDriverWait(driver, 20).until(lambda a: len(a.window_handles) > 1)\n            for handle in driver.window_handles:\n                if handle != printlist_handle:\n                    driver.switch_to.window(handle)\n            WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.XPATH, '//*[@id=\"set-propty\"]')))\n        #开始进行列表控件的新增、验证过程\n        with allure.step(\"等待并删除画布上已经配置好的列表控件\"):\n            logger.info(\"等待并删除画布上已经配置好的列表控件\")\n            WebDriverWait(driver,20).until(EC.presence_of_element_located((By.XPATH,'//*[@title=\"列表: 生产订单表体\"]')))\n            element = driver.find_element(By.XPATH,'//*[@title=\"列表: 生产订单表体\"]')\n            if element:\n                element.click()\n                #等待删除按钮出现并点击\n                WebDriverWait(driver,20).until(EC.presence_of_element_located((By.XPATH,'//*[@title=\"列表: 生产订单表体\"]/..//*[contains(@class,\"delete-button\")]')))\n                driver.find_element(By.XPATH,'//*[@title=\"列表: 生产订单表体\"]/..//*[contains(@class,\"delete-button\")]').click()\n                element = driver.find_elements(By.XPATH, '//*[@title=\"列表: 生产订单表体\"]')\n                assert len(element) ==0\n                logger.info(\"系统预置的列表在画布删除成功\")\n        #通过拖拽添加新列表控件并进行元素配置\n        with allure.step(\"通过拖拽添加新列表控件\"):\n            #配置列表控件element\n            list_element = driver.find_element(By.XPATH,'//*[@fieldid=\"design|ComponentGroup|Panel|tableGroup|table\"]')\n            logger.info(\"获取到列表控件\")\n            #配置画布目标element\n            targ_element = driver.find_element(By.XPATH,'//*[@id=\"watermarkWordCover\"]')\n            logger.info(\"获取到画布\")\n            #将列表控件移动到目标位置\n            #ActionChains(driver).drag_and_drop(list_element,targ_element).perform()\n            action = ActionChains(driver)\n            action.move_to_element(list_element).perform()\n            action.click_and_hold()\n            # 3. 将鼠标移动到画布的中心位置\n            # 计算画布中心坐标\n            logger.info(\"x坐标是\"+str(targ_element.location['x']))\n            logger.info(\"y坐标是\"+str(targ_element.location['y']))\n            canvas_center_x = targ_element.location['x'] + 200\n            canvas_center_y = targ_element.location['y'] + 400\n            action.move_by_offset(canvas_center_x - list_element.location['x'],\n                                   canvas_center_y - list_element.location['y']).perform()\n            action.release().perform()\n            logger.info(\"列表控件完成向画布拖入操作\")\n            logger.info(\"验证列表设置弹窗弹出正常\")\n            WebDriverWait(driver,20).until(EC.presence_of_element_located((By.XPATH,'//*[@id=\"inputDesignModalHeader\"]')))\n            list_settings_element = driver.find_element(By.XPATH,'//*[@id=\"inputDesignModalHeader\"]')\n            time.sleep(10)\n            assert list_settings_element is not None\n        with allure.step(\"开始配置列表的三个指定字段\"):\n            logger.info(\"开始配置列表的三个指定字段\")\n            #搜索选择字段\n            WebDriverWait(driver,20).until(EC.presence_of_element_located((By.XPATH,'//*[@placeholder=\"请输入查找内容\"]')))\n            element = driver.find_element(By.XPATH,'//*[@placeholder=\"请输入查找内容\"]')\n            logger.info(\"搜索并选择字段【开工日期】\")\n            element.send_keys(\"开工日期\")\n            WebDriverWait(driver,20).until(EC.presence_of_element_located((By.XPATH,'//*[@id=\"Order.orderProduct.startDate\"]')))\n            driver.find_element(By.XPATH,'//*[@id=\"Order.orderProduct.startDate\"]').click()\n            #删除搜索框内容\n            element = driver.find_element(By.XPATH, '//*[@value=\"开工日期\"][@type=\"search\"]')\n            # 模拟control+a键盘全选\n            element.click()\n            element.send_keys(Keys.CONTROL + 'a')\n            # 模拟键盘的删除delete\n            element.send_keys(Keys.DELETE)\n            time.sleep(3)\n            logger.info(\"开始验证第一个字段选择是否正常\")\n            yuansu1 = driver.find_element(By.XPATH,'//*[@title=\"Order.orderProduct.startDate\"]')\n            assert yuansu1 is not None\n            logger.info(\"搜索并选择字段【完工日期】\")\n            element.send_keys(\"完工日期\")\n            WebDriverWait(driver, 20).until(\n                EC.presence_of_element_located((By.XPATH, '//*[@id=\"Order.orderProduct.finishDate\"]')))\n            driver.find_element(By.XPATH, '//*[@id=\"Order.orderProduct.finishDate\"]').click()\n            # 删除搜索框内容\n            element = driver.find_element(By.XPATH, '//*[@value=\"完工日期\"][@type=\"search\"]')\n            # 模拟control+a键盘全选\n            element.send_keys(Keys.CONTROL + 'a')\n            # 模拟键盘的删除delete\n            element.send_keys(Keys.DELETE)\n            time.sleep(3)\n            logger.info(\"开始验证第二个字段选择是否正常\")\n            yuansu2 = driver.find_element(By.XPATH, '//*[@title=\"Order.orderProduct.finishDate\"]')\n            assert yuansu2 is not None\n            logger.info(\"搜索并选择字段【生产数量】\")\n            element.send_keys(\"生产数量\")\n            WebDriverWait(driver, 20).until(\n                EC.presence_of_element_located((By.XPATH, '//*[@id=\"Order.orderProduct.quantity\"]')))\n            driver.find_element(By.XPATH, '//*[@id=\"Order.orderProduct.quantity\"]').click()\n            # 删除搜索框内容\n            element = driver.find_element(By.XPATH, '//*[@value=\"生产数量\"][@type=\"search\"]')\n            # 模拟control+a键盘全选\n            element.send_keys(Keys.CONTROL + 'a')\n            # 模拟键盘的删除delete\n            element.send_keys(Keys.DELETE)\n            time.sleep(3)\n            logger.info(\"开始验证第三个字段选择是否正常\")\n            yuansu3 = driver.find_element(By.XPATH, '//*[@title=\"Order.orderProduct.quantity\"]')\n            assert yuansu3 is not None\n        with allure.step(\"点击确定保存列表\"):\n            logger.info(\"点击确定保存列表\")\n            WebDriverWait(driver,20).until(EC.presence_of_element_located((By.XPATH,'//*[text()=\"确定\"]')))\n            driver.find_element(By.XPATH,'//*[text()=\"确定\"]').click()\n        time.sleep(3)\n        with allure.step(\"开始验证新增列表是否展示正常\"):\n            logger.info(\"开始验证新增列表是否展示正常\")\n            elements = driver.find_elements(By.XPATH, '//*[@id=\"inputDesignModalHeader\"]')\n            assert len(elements) == 0, \"列表设置弹窗未关闭\"\n            #检查列表配置后在画布上展示正常\n            new_list_title = driver.find_element(By.XPATH,'//*[@id=\"watermarkWordCover\"]//*[@title=\"列表: 生产订单产品\"]')\n            assert new_list_title is not None\n        with allure.step(\"验证列表默认没有开启承前过次页，且开启设置正常\"):\n            logger.info(\"验证列表默认没有开启承前过次页，且开启设置正常\")\n            chengqianye = driver.find_elements(By.XPATH,'//*[text()=\"承前页\"]')\n            guociye = driver.find_elements(By.XPATH,'//*[text()=\"过次页\"]')\n            assert len(chengqianye) == 0,\"元素'承前页'存在，预期不存在\"\n            assert len(guociye) == 0,\"元素'过次页'存在，预期不存在\"\n        with allure.step(\"开启承前过次开关\"):\n            logger.info(\"开启承前过次开关\")\n            WebDriverWait(driver,20).until(EC.presence_of_element_located((By.XPATH,'//*[@fieldid=\"design|InputBool|pastAcceptance|Switch\"]')))\n            driver.find_element(By.XPATH,'//*[@fieldid=\"design|InputBool|pastAcceptance|Switch\"]').click()\n        time.sleep(3)\n        with allure.step(\"验证开启后承前页、过次页两行出现\"):\n            logger.info(\"验证开启后承前页、过次页两行出现\")\n>           assert len(chengqianye) != 0, \"元素'承前页'存在，预期存在\"\nE           AssertionError: 元素'承前页'存在，预期存在\nE           assert 0 != 0\nE            +  where 0 = len([])\n\ntest_cases\\test_ui\\test_ui_template_list.py:462: AssertionError"}, "steps": [{"name": "检查并删除历史执行中遗留的本次用例使用模板名称模板", "status": "passed", "start": 1772422430948, "stop": 1772422437767}, {"name": "获取当前句柄", "status": "passed", "start": 1772422437767, "stop": 1772422438193}, {"name": "进行目标模板的创建", "status": "passed", "start": 1772422438193, "stop": 1772422438931}, {"name": "进入打印模板设计器浏览器页面", "status": "passed", "start": 1772422438932, "stop": 1772422440899}, {"name": "等待并删除画布上已经配置好的列表控件", "status": "passed", "start": 1772422440899, "stop": 1772422442663}, {"name": "通过拖拽添加新列表控件", "status": "passed", "start": 1772422442663, "stop": 1772422453826}, {"name": "开始配置列表的三个指定字段", "status": "passed", "start": 1772422453826, "stop": 1772422464914}, {"name": "点击确定保存列表", "status": "passed", "start": 1772422464914, "stop": 1772422465168}, {"name": "开始验证新增列表是否展示正常", "status": "passed", "start": 1772422468184, "stop": 1772422468215}, {"name": "验证列表默认没有开启承前过次页，且开启设置正常", "status": "passed", "start": 1772422468215, "stop": 1772422468242}, {"name": "开启承前过次开关", "status": "passed", "start": 1772422468242, "stop": 1772422468454}, {"name": "验证开启后承前页、过次页两行出现", "status": "failed", "statusDetails": {"message": "AssertionError: 元素'承前页'存在，预期存在\nassert 0 != 0\n +  where 0 = len([])\n", "trace": "  File \"D:\\python_workspace\\yonyou_automation\\test_cases\\test_ui\\test_ui_template_list.py\", line 462, in test_kongjian_list_drag_default_value\n    assert len(chengqianye) != 0, \"元素'承前页'存在，预期存在\"\n"}, "start": 1772422471464, "stop": 1772422471464}], "attachments": [{"name": "log", "source": "4b9dfaab-796e-4968-af80-eef9f52a6651-attachment.txt", "type": "text/plain"}, {"name": "stdout", "source": "6f73eee3-bd66-4830-aac0-430e26f257ec-attachment.txt", "type": "text/plain"}, {"name": "stderr", "source": "0978e2da-d52b-4725-aeb6-bcd1f0d55848-attachment.txt", "type": "text/plain"}], "start": 1772422429049, "stop": 1772422471467, "uuid": "286ca7f7-e10f-4561-9b9d-0045f846f659", "historyId": "344cfd3c026031a725440117d4e87205", "testCaseId": "af10032991e0becd24174e3178987018", "fullName": "test_cases.test_ui.test_ui_template_list#test_kongjian_list_drag_default_value", "labels": [{"name": "epic", "value": "UI自动化"}, {"name": "feature", "value": "打印模板"}, {"name": "story", "value": "设计器列表新增检查"}, {"name": "parentSuite", "value": "test_cases.test_ui"}, {"name": "suite", "value": "test_ui_template_list"}, {"name": "host", "value": "LAPTOP-AKAH6LMA"}, {"name": "thread", "value": "18780-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_cases.test_ui.test_ui_template_list"}]}